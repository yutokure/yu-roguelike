<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ミニゲーム: リズムタイル</title>
    <link rel="stylesheet" href="../manual.css">
</head>
<body>
    <main>
        <h1>ミニゲーム: リズムタイル</h1>
        <section>
            <h2>概要</h2>
            <p>
                4 本のレーンに流れてくるタップノーツとホールドノーツをタイミング良く入力し、
                コンボと精度を稼ぐリズムアクションです。ノーツ種別ごとに獲得 EXP が異なり、
                タイミング評価とコンボボーナスが重なるほど効率良く経験値を伸ばせます。
            </p>
        </section>
        <section>
            <h2>準備とゲーム開始</h2>
            <ol>
                <li>タイトルメニューから <strong>リズムタイル</strong> を選択します。</li>
                <li>
                    ホスト設定で難易度（<strong>EASY</strong> / <strong>NORMAL</strong> / <strong>HARD</strong>）を選びます。
                    スクロール速度・ノーツ密度・判定幅が以下のように変化します。
                </li>
            </ol>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>難易度</th>
                            <th>スクロール速度</th>
                            <th>ノーツ間隔</th>
                            <th>ホールド出現率</th>
                            <th>判定幅（Perfect / Great / Hit）</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>EASY</td>
                            <td>約 220 px/秒</td>
                            <td>0.62〜0.84 秒</td>
                            <td>28%</td>
                            <td>±18 / ±34 / ±64 px</td>
                        </tr>
                        <tr>
                            <td>NORMAL</td>
                            <td>約 280 px/秒</td>
                            <td>0.54〜0.76 秒</td>
                            <td>36%</td>
                            <td>±16 / ±30 / ±54 px</td>
                        </tr>
                        <tr>
                            <td>HARD</td>
                            <td>約 340 px/秒</td>
                            <td>0.46〜0.66 秒</td>
                            <td>43%</td>
                            <td>±14 / ±26 / ±48 px</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p class="small-note">ゲームは呼び出し直後に自動でスタートし、明示的な終了条件はありません。任意のタイミングで他メニューへ戻ってください。</p>
        </section>
        <section>
            <h2>操作方法</h2>
            <ul>
                <li>マウス / タッチ操作: ノーツが来たレーンをタップまたは押し込みます。ホールドノーツ中は指・ボタンを押し続け、終点まで届いたら自動で判定が確定します。</li>
                <li>キーボード: <kbd>D</kbd>/<kbd>F</kbd>/<kbd>J</kbd>/<kbd>K</kbd> が左から順の 4 レーンに対応します。ホールドノーツは押しっぱなしにし、終点まで離さないでください。</li>
            </ul>
            <p>ホールド中に離すとミス扱いになります。複数のホールドを同時に押さえている場合でも、レーンごとに独立して処理されます。</p>
        </section>
        <section>
            <h2>ルールと進行</h2>
            <ul>
                <li>ノーツはランダムなレーンに生成され、一定距離を進むとヒットライン（キャンバス下部の破線）に到達します。</li>
                <li>タップノーツは下辺がヒットラインへ重なった瞬間に入力すると判定されます。早すぎる入力は無効、遅れるとミスになります。</li>
                <li>ホールドノーツは先頭をヒットラインで捉えて押し込み、終端がラインを通過するまで押し続けます。押し始めが遅い、または途中で離すとミスです。</li>
                <li>ホールドの終端がラインを越え、許容解放距離（EASY:+32 px / NORMAL:+28 px / HARD:+24 px）に入ると自動的に成功判定となります。</li>
                <li>ミスするとコンボがリセットされ、該当レーンが赤くフラッシュします。成功時は青いフラッシュでフィードバックされます。</li>
                <li>プレイ中は HUD に難易度、成功数、ミス数、現在コンボ、最大コンボ、命中精度が表示されます。</li>
            </ul>
        </section>
        <section>
            <h2>スコアと経験値</h2>
            <ul>
                <li>成功時に <strong>ノーツ種別 + タイミング評価 + コンボボーナス</strong> の合計 EXP を獲得します。</li>
                <li>タップノーツ基礎値は 3.2 EXP、ホールドノーツは 5.5 EXP です。</li>
                <li>タイミング評価は <strong>PERFECT:+2.2</strong>、<strong>GREAT:+1.2</strong>、<strong>GOOD:+0.6</strong>。</li>
                <li>コンボボーナスはチェイン数 × 0.32 EXP（最大 +4.5 EXP）で加算されます。ミスすると 0 にリセットされます。</li>
                <li>ミス時は EXP 変化なしで、内部ログに「late」「hold_released」などの理由が残ります。</li>
                <li>ヒット数とミス数から算出される命中精度（%）がリアルタイムで更新されます。</li>
            </ul>
        </section>
        <section>
            <h2>攻略のヒント</h2>
            <ul>
                <li>ヒットライン上で視線を固定し、ノーツが近づいてくるまで入力を我慢することで早押しミスを防げます。</li>
                <li>ホールドは押し始めの精度で評価が決まります。ライン直前で構えておき、先頭が触れた瞬間に押し込むと高評価を得やすくなります。</li>
                <li>コンボボーナスが EXP を大きく左右します。危険な連打は一度離して立て直し、確実に捉えられるタイミングを優先しましょう。</li>
                <li>タッチ操作では複数指でレーンを分担すると、同時押しホールドが来ても安定します。キーボードなら左右両手を使って配置すると押しやすくなります。</li>
            </ul>
        </section>
    </main>
</body>
</html>
