<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ミニゲーム: ペイントツール</title>
    <link rel="stylesheet" href="../manual.css">
</head>
<body>
    <main>
        <h1>ミニゲーム: ペイントツール</h1>
        <section>
            <h2>概要</h2>
            <p>
                Windows 風の UI で 960×540 ピクセルのキャンバスに描画できるドロー系ユーティリティです。
                ミニゲーム起動時には直近の設定とキャンバス内容を自動で復元し、描き途中の作品をすぐに再開できます。
            </p>
        </section>
        <section>
            <h2>画面構成</h2>
            <ul>
                <li><strong>タイトルバー</strong>：ファイル名の先頭に <code>*</code> が付いている場合は未保存の変更があります。右端の「×」から終了する際も、未保存なら確認ダイアログが表示されます。</li>
                <li><strong>リボン</strong>：<em>ファイル操作ボタン</em>（新規・読み込み・保存・名前を付けて保存・エクスポート・クリア・グリッド切り替え）と、<em>履歴ボタン</em>（元に戻す / やり直す）、<em>ツール選択</em>、<em>サイズ／ズーム</em>、<em>カラーエリア</em>が並びます。</li>
                <li><strong>キャンバス領域</strong>：中央にキャンバス、本体メニューからのズーム値に応じて拡大縮小されます。オプションで 16px 間隔のグリッドを重ねられます。</li>
                <li><strong>ステータスバー</strong>：カーソル座標、ブラシ太さ、ズーム値、セッション中に獲得した経験値を表示します。</li>
            </ul>
        </section>
        <section>
            <h2>ツール一覧</h2>
            <p>リボンのツールボタンをクリックすると、以下の描画モードを切り替えられます。いずれも右クリックで「背景色（セカンダリカラー）」、左クリックで「前景色（プライマリカラー）」を使用します。</p>
            <ul>
                <li><strong>ブラシ / 鉛筆 / マーカー / 消しゴム</strong>：フリーハンド描画。マーカーは半透明、消しゴムは白色で塗りつぶします。</li>
                <li><strong>直線</strong>：ドラッグ開始点から終了点まで線を引きます。<kbd>Shift</kbd> を押しながらドラッグすると 45 度刻みで角度をスナップします。</li>
                <li><strong>四角 / 楕円</strong>：ドラッグした範囲に図形を描画します。<kbd>Shift</kbd> で正方形／正円に固定し、リボンの「形を塗りつぶす」ボタンで枠線のみ／塗りつぶしを切り替えます。</li>
                <li><strong>塗りつぶし</strong>：クリックした地点と同色の領域を一括で塗り替えます。</li>
                <li><strong>スポイト</strong>：キャンバス上の色を取得します。左クリックで前景色、右クリックで背景色に設定します。</li>
            </ul>
            <p class="small-note">Undo/Redo の履歴は最大 20 ステップで保持されます。線や図形の描画はボタンを離した瞬間に 1 ステップとして確定します。</p>
        </section>
        <section>
            <h2>色の管理</h2>
            <ul>
                <li>プレビューの上下にある色見本をクリックするとカラーピッカーで任意色を設定できます。中央の ↔ ボタンで前景色と背景色を入れ替え可能です。</li>
                <li>パレットの色チップを左クリックすると前景色、右クリック（長押し）すると背景色として登録できます。</li>
                <li>スポイトツールを使うとキャンバス上の色を直接取得できます。</li>
            </ul>
        </section>
        <section>
            <h2>サイズ・ズーム</h2>
            <ul>
                <li>ブラシサイズは 1〜96px の範囲でスライダー調整できます。ステータスバーにも現在値が表示されます。</li>
                <li>ズームは 50〜200% を連続調整でき、キャンバス枠全体が拡縮します。エクスポートされる画像サイズは常に 960×540 のままです。</li>
            </ul>
        </section>
        <section>
            <h2>ファイル操作と保存</h2>
            <ul>
                <li><strong>新規</strong>：キャンバスを白紙にし、ファイル名を既定値に戻します。未保存の変更がある場合は確認ダイアログが表示されます。</li>
                <li><strong>読み込み</strong>：画像ファイル（PNG/JPEG など）を選択すると、キャンバス内に収まるよう等倍率で縮小し中央配置します。</li>
                <li><strong>保存</strong>：初回または既定名のままの場合はファイル名入力を促し、PNG 形式でダウンロードします。</li>
                <li><strong>名前を付けて保存</strong>：常にファイル名入力ダイアログを開きます。</li>
                <li><strong>エクスポート</strong>：現在のファイル名で即座に PNG として保存します（保存ボタンと同じ処理）。</li>
                <li><strong>クリア</strong>：キャンバスを白紙にします。未保存の場合は確認ダイアログが出ます。</li>
                <li><strong>グリッド</strong>：16px 間隔の補助線を ON/OFF します。設定は次回起動時にも保存されます。</li>
            </ul>
            <p class="small-note">直近のキャンバス画像・選択ツール・色・グリッド・ズームなどはブラウザのローカルストレージに保存され、再起動時に自動復元されます。</p>
        </section>
        <section>
            <h2>操作方法</h2>
            <ul>
                <li>左クリックで前景色、右クリックで背景色を使って描画します（塗りつぶし・スポイトも同様）。</li>
                <li>ドラッグで線や図形を描画します。途中で <kbd>Shift</kbd> を押すと角度や縦横比が固定されます。</li>
                <li>キーボードショートカット：<kbd>Ctrl</kbd>+<kbd>Z</kbd>（元に戻す）、<kbd>Ctrl</kbd>+<kbd>Y</kbd>（やり直す）、<kbd>Ctrl</kbd>+<kbd>S</kbd>（保存）、<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>S</kbd>（名前を付けて保存）、<kbd>Ctrl</kbd>+<kbd>O</kbd>（読み込み）、<kbd>Ctrl</kbd>+<kbd>N</kbd>（新規）。</li>
            </ul>
        </section>
        <section>
            <h2>経験値の獲得</h2>
            <p>ミニペイントは操作内容に応じて MiniExp の経験値を付与します。</p>
            <ul>
                <li>線描画：一定間隔で <strong>+1 XP</strong></li>
                <li>塗りつぶし：<strong>+3 XP</strong></li>
                <li>図形（直線／四角／楕円）の確定：<strong>+2 XP</strong></li>
                <li>新規キャンバス作成：<strong>+1 XP</strong></li>
                <li>画像読み込み：<strong>+5 XP</strong></li>
                <li>保存／エクスポート：<strong>+8 XP</strong></li>
            </ul>
            <p>獲得状況はステータスバーの「獲得EXP」に表示され、ゲーム終了時のスコアとしても利用されます。</p>
        </section>
        <section>
            <h2>コツと注意点</h2>
            <ul>
                <li>ペンツールで細部を描く際はズームを上げ、仕上げで 100% に戻してバランスを確認すると整いやすくなります。</li>
                <li>頻繁に保存しておくとクラッシュ時のロスを防げます。保存後はタイトルバーの <code>*</code> が消え、最新状態がローカルストレージにも反映されます。</li>
                <li>読み込んだ画像はキャンバス内に収まる最大サイズで配置されるため、細部編集が必要な場合はズームを活用してください。</li>
            </ul>
        </section>
    </main>
</body>
</html>
