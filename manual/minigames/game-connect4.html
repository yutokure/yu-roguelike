<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ミニゲーム: 四目並べ</title>
    <link rel="stylesheet" href="../manual.css">
</head>
<body>
    <main>
        <h1>ミニゲーム: 四目並べ</h1>
        <section>
            <h2>概要</h2>
            <p>
                7 列 × 6 行のグリッドにディスクを落として縦・横・斜めいずれかに 4 連を作るクラシックな落下型アブストラクトゲームです。
                MiniExp 版ではプレイヤーが先手となり、AI と 1 対 1 で対戦します。着手ごとに <strong>+1 EXP</strong>、リーチ（勝ち筋が 1 手で完成する形）を
                作ると追加で <strong>+10 EXP</strong> を獲得でき、勝利時は難易度に応じたボーナスが加算されます。
            </p>
        </section>
        <section>
            <h2>画面構成</h2>
            <ul>
                <li><strong>プレイボード</strong>：中央のキャンバスに青いボードと 7×6 のホールが描画され、ディスクは下端まで自動で落下します。マウスを重ねた列は黄色の帯でハイライトされます。</li>
                <li><strong>ターン表示</strong>：ボード上部に現在の手番が表示され、「あなたの番」「AI の番」「ゲーム終了」が状況に応じて切り替わります。</li>
                <li><strong>ハイライト</strong>：直前の着手は黄色い円で囲まれます。危険なラインはオレンジ（警告）で脈動しながら表示され、AI 側の致命的なラインが生じると赤に近い色調で強調されます。</li>
                <li><strong>オーバーレイ</strong>：勝敗や引き分けが決着するとボード中央に結果メッセージと「R キーでリセットできます」というヒントが表示されます。</li>
            </ul>
        </section>
        <section>
            <h2>操作方法と進行</h2>
            <ol>
                <li>プレイヤーの番では、置きたい列にマウスカーソルを合わせてクリックします。列に空きがない場合は配置できません。</li>
                <li>ディスクは自動で最下段の空きマスへ落ち、配置直後に勝敗やリーチ判定が行われます。リーチを作った場合はその場で追加 EXP が加算されます。</li>
                <li>プレイヤーが勝利した場合は難易度別の勝利ボーナスが付与され、ゲームは終了します。空きマスがなく勝敗が決まらない場合は引き分けです。</li>
                <li>ターンが AI に移ると短い待機時間の後に AI が自動で着手します。難易度ノーマル以上では自陣の勝ち筋優先・相手のリーチ阻止・中心寄りの手を評価して選択し、ハードでは先読みを含む多層評価を行います。</li>
                <li>ゲーム終了後は <kbd>R</kbd> キーを押すかメニューからリセットすると初期配置に戻ります。</li>
            </ol>
        </section>
        <section>
            <h2>ルールメモ</h2>
            <ul>
                <li>ディスクは常に最下段まで落下し、中空で停止することはありません。</li>
                <li>縦・横・斜めいずれかで自分のディスクが 4 連続すれば勝利です。双方とも揃えられず盤面がいっぱいになると引き分けになります。</li>
                <li>危険度ハイライトはプレイヤー・AI 双方の潜在的なラインを検出し、同じ列に新たなディスクを重ねた際の影響を視覚的に確認できます。</li>
                <li>直近で新たに現れた防手・勝ち手・詰み手・追い手などがある場合はボード上に小さな吹き出しで通知されます。</li>
            </ul>
        </section>
        <section>
            <h2>EXP と難易度</h2>
            <ul>
                <li>ディスク配置：<strong>+1 EXP</strong></li>
                <li>リーチ達成：<strong>+10 EXP</strong>（勝利手ではない三連＋余地を作った場合）</li>
                <li>勝利ボーナス：<strong>イージー +20</strong> / <strong>ノーマル +80</strong> / <strong>ハード +200 EXP</strong></li>
            </ul>
            <p>MiniExp ロビーで設定した難易度がそのまま AI の強さに反映され、イージーはランダム気味、ノーマルはヒューリスティック、ハードは先読み重視の挙動になります。</p>
        </section>
        <section>
            <h2>戦略とヒント</h2>
            <ul>
                <li>中央列は評価が高く設定されているため、序盤は中央付近に厚みを作ると攻守両面で有利に戦えます。</li>
                <li>リーチの発生は EXP 源でもあるので、即勝利にならない場面では相手に阻止を強要する三連ラインを用意し、次ターンの勝ち手を複数準備しましょう。</li>
                <li>危険度ハイライトが点灯した列は相手の強い手筋を示しています。防手のポップアップが出た直後は、同じセルに重ねることでピンチを回避できるか確認してください。</li>
                <li>ハード難易度は二手先の分岐も評価してくるため、相手に二重リーチを許すと一気に押し切られます。自分の攻め筋と同時に相手のフォーク（複数勝ち筋）もチェックしましょう。</li>
            </ul>
        </section>
    </main>
</body>
</html>
