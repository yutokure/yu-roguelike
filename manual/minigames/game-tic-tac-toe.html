<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ミニゲーム: 三目並べ</title>
    <link rel="stylesheet" href="../manual.css">
</head>
<body>
    <main>
        <h1>ミニゲーム: 三目並べ</h1>
        <section>
            <h2>概要</h2>
            <p>
                3×3 の盤面でプレイヤー（濃紺）と AI（薄灰）が交互に石を置き、先に 3 連を作った側が勝利するクラシックな抽象ボードゲームです。
                MiniExp 版は石盤ボードゲーム集の一種として実装されており、ホバー強調や脅威ハイライト、ポップアップ通知で読み合いをサポートします。
                難易度は <strong>EASY</strong> / <strong>NORMAL</strong> / <strong>HARD</strong> に対応しており、<strong>HARD</strong> では完全読み切りの AI が待ち構えています。
            </p>
        </section>
        <section>
            <h2>ゲームの始め方</h2>
            <ol>
                <li>ミニゲームセレクターから <strong>三目並べ</strong> を起動すると、即座に空の 3×3 グリッドが中央に描画されます。</li>
                <li>ホストメニューで難易度を設定している場合は、その設定が AI の思考ロジックと勝利ボーナスに反映されます（未指定時は <strong>NORMAL</strong>）。</li>
                <li>ステータス欄が「あなたの番」と表示されたらゲーム開始です。プレイヤーが常に先手を担当します。</li>
            </ol>
            <p class="small-note">ホスト側のリスタートショートカットは対局中に一時的に無効化され、ゲーム終了後に自動で復帰します。</p>
        </section>
        <section>
            <h2>操作方法</h2>
            <ul>
                <li>マウスクリック：自分の手番中に空いているマスをクリックすると石を配置します。無効な位置を押した場合は無視されます。</li>
                <li>マウス移動：空きマス上にカーソルを置くと淡い黄色の円でホバー位置が強調され、打ちたいマスを把握しやすくなります。</li>
                <li><kbd>R</kbd> キー：ゲーム終了後、または自分のターン中に押すと盤面を初期化して再戦できます。</li>
            </ul>
            <p>AI の手番中は入力がロックされ、思考完了後に 0.16〜0.2 秒のタイマーを挟んで石を配置します。</p>
        </section>
        <section>
            <h2>盤面表示とフィードバック</h2>
            <ul>
                <li>直近に置かれた石は黄色いリングで囲われ、どの手から読みを進めればよいか一目で把握できます。</li>
                <li>危険度の高いラインや勝ち筋は赤系の脅威ハイライトで示され、脅威が新たに発生・解消された際は「防手」「勝ち手」などのポップアップが表示されます。</li>
                <li>禁手判定は三目並べでは発生しませんが、同じエンジンで連珠などを遊ぶ際は禁手ラインが点滅表示されます。</li>
                <li>ゲーム終了時には半透明のオーバーレイに結果メッセージと「Rキーでリセットできます」のヒントが表示されます。</li>
            </ul>
        </section>
        <section>
            <h2>ルールと進行</h2>
            <ul>
                <li>プレイヤーが石を置いた直後に勝利判定が行われ、3 連を作るとその場で勝利となります。空きマスが無くなれば引き分けです。</li>
                <li>AI は常に勝ち手を優先し、<strong>NORMAL</strong> 以上ではプレイヤーの直近の勝ち筋も確実にブロックします。</li>
                <li><strong>HARD</strong> ではミニマックス探索で全通りを読み切るため、最適プレイを崩すのは困難です。<strong>EASY</strong> ではランダム要素が入り初心者向けの練習が可能です。</li>
                <li>ターンは常に交互で、盤面が埋まるか勝敗が付くまで継続します。</li>
            </ul>
        </section>
        <section>
            <h2>経験値テーブル</h2>
            <ul>
                <li>石を配置するたびに <strong>+1 EXP</strong>。</li>
                <li>自分の石で 2 連を作り、残り 1 マスで勝利できる状態（リーチ）にすると追加で <strong>+10 EXP</strong>。</li>
                <li>勝利ボーナスは難易度ごとに <strong>EASY:+12</strong> / <strong>NORMAL:+48</strong> / <strong>HARD:+120</strong> EXP。</li>
            </ul>
            <p>EXP はホストに報告され、同じエンジンで動く他の石盤ゲームとも統一仕様で蓄積されます。</p>
        </section>
        <section>
            <h2>攻略のヒント</h2>
            <ul>
                <li>中央マスに先着できれば勝ち筋を複数保持しやすく、AI にプレッシャーをかけられます。</li>
                <li>角と中心を組み合わせてフォーク（同時リーチ）を作ると、<strong>NORMAL</strong> までなら AI の評価を超えて勝利を狙えます。</li>
                <li>脅威ポップアップは自分・AI 双方の危険度を教えてくれるので、表示されたマスの攻防を優先的にチェックしましょう。</li>
                <li><strong>HARD</strong> では最適応手しか返ってこないため、引き分けを前提にリーチボーナスを確実に稼ぐプレイが有効です。</li>
            </ul>
        </section>
    </main>
</body>
</html>
