<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ミニゲーム: フロア降りサバイバル</title>
    <link rel="stylesheet" href="../manual.css">
</head>
<body>
    <main>
        <h1>ミニゲーム: フロア降りサバイバル</h1>
        <section>
            <h2>概要</h2>
            <p>
                迫りくる針付きの天井から逃げつつ、途切れ途切れの足場を乗り継いで地下へ降下していく縦スクロールアクションです。
                プレイヤーは 5 ライフでスタートし、足場から落ちたり針に触れたりすると天井が追いついてきます。
                深く降りるほどスクロール速度が上がり、足場の間隔も広がるため、状況判断と素早い入力が求められます。
            </p>
        </section>
        <section>
            <h2>起動と準備</h2>
            <ol>
                <li>MiniExp ハブで <strong>フロア降りサバイバル</strong> を選択すると難易度（EASY / NORMAL / HARD）を選ぶダイアログが開きます。</li>
                <li>難易度を決定すると 480×640 ピクセルのキャンバスとタッチパッドが表示され、ゲームが即時に開始されます。</li>
                <li>ゲーム途中で <kbd>Esc</kbd> を押すとポーズ／再開を切り替えられます。ゲームオーバー後は <kbd>Space</kbd> または <kbd>↑</kbd> で再スタートします。</li>
            </ol>
            <p class="small-note">難易度はリスタート時にも再選択できます。モバイルでは画面下部のパッドで操作してください。</p>
        </section>
        <section>
            <h2>操作方法</h2>
            <ul>
                <li><kbd>←</kbd> / <kbd>A</kbd>: 左へ移動</li>
                <li><kbd>→</kbd> / <kbd>D</kbd>: 右へ移動</li>
                <li><kbd>Space</kbd> / <kbd>↑</kbd> / <kbd>W</kbd>: ジャンプ</li>
            </ul>
            <p>ジャンプ入力には 0.14 秒のジャンプバッファと 0.12 秒のコヨーテタイムが用意されており、足場からわずかに離れていてもタイミング良くボタンを押せば跳べます。</p>
            <p>タッチ操作では左・ジャンプ・右の 3 つの大きなボタンが表示され、いずれもマルチタッチ対応です。</p>
        </section>
        <section>
            <h2>ステージ要素</h2>
            <ul>
                <li><strong>通常足場</strong>: 灰色のプラットフォーム。安全に着地できます。</li>
                <li><strong>スプリング足場</strong>: シアンに輝く足場。着地すると大きくバウンドし、次に安全な足場へ着地したタイミングでチェーンボーナスが発生します。</li>
                <li><strong>コンベア足場</strong>: オレンジ色。左右いずれかに流れており、着地中は一定の加速度で押し流されます。流れに逆らって調整しましょう。</li>
                <li><strong>トゲ付き足場</strong>: 赤色で上面にトゲが付いています。触れるとダメージを受け、短時間の無敵とノックバックが発生します。</li>
                <li><strong>針天井</strong>: 画面上部を覆う天井。プレイヤーの下降に合わせて徐々に速度を上げ、接触するとダメージを受けた上で近くの足場に押し戻されます。</li>
            </ul>
        </section>
        <section>
            <h2>ライフとゲームオーバー</h2>
            <p>
                ライフは 5。天井やトゲ足場に触れるたびに 1 減り、残ライフが 0 になるとゲームオーバーです。
                ダメージを受けると 0.6 秒の無敵時間が与えられ、天井に潰された場合は真下の足場へ強制移動されます。
                画面外（カメラより上に押し出される、または下に置き去りにされる）に出ると即座に終了するため、スクロールから遅れないようにしましょう。
            </p>
        </section>
        <section>
            <h2>スコアと経験値</h2>
            <ul>
                <li><strong>到達フロア</strong>: 深さ 120 ピクセルごとに 1 階層としてカウントされ、現在フロア数がスコアになります。</li>
                <li><strong>フロア到達ボーナス</strong>: フロア n に到達するたびに <code>6 + n × 0.8</code> の経験値が支給され、難易度ごとの倍率（EASY ×0.8 / NORMAL ×1.0 / HARD ×1.25）がかかります。</li>
                <li><strong>スプリングチェーン</strong>: スプリングで跳ねた直後に安全な足場へ着地するとボーナス EXP（初回 +8、以降 1 回ごとに +2、最大 +18）が得られます。</li>
                <li><strong>ライフボーナス</strong>: ゲームオーバー時に残っていたライフ ×5 の経験値が加算されます。</li>
            </ul>
            <p class="small-note">EXP は MiniExp のアカウント共有機能（<code>awardXp()</code>）を通じて即時配布されます。オフラインの場合は表示上のみの加算です。</p>
        </section>
        <section>
            <h2>難易度の違い</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>難易度</th>
                            <th>初期スクロール速度</th>
                            <th>加速率</th>
                            <th>足場の間隔</th>
                            <th>コンベア押し出し</th>
                            <th>特殊足場の出現率</th>
                            <th>EXP倍率</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>EASY</td>
                            <td>58 px/秒</td>
                            <td>+0.018/階層</td>
                            <td>70〜120 px</td>
                            <td>140 px/秒相当</td>
                            <td>スプリング18% / コンベア22% / トゲ12%</td>
                            <td>×0.8</td>
                        </tr>
                        <tr>
                            <td>NORMAL</td>
                            <td>70 px/秒</td>
                            <td>+0.028/階層</td>
                            <td>90〜150 px</td>
                            <td>180 px/秒相当</td>
                            <td>スプリング24% / コンベア26% / トゲ16%</td>
                            <td>×1.0</td>
                        </tr>
                        <tr>
                            <td>HARD</td>
                            <td>82 px/秒</td>
                            <td>+0.036/階層</td>
                            <td>110〜170 px</td>
                            <td>210 px/秒相当</td>
                            <td>スプリング30% / コンベア30% / トゲ20%</td>
                            <td>×1.25</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p>深く潜るほどスクロールの目標速度が上がり最大 200 px/秒に達します。ギャップが広がる HARD では、コンベアの押し出しにも注意してください。</p>
        </section>
        <section>
            <h2>攻略のヒント</h2>
            <ul>
                <li>スプリングで跳ねた直後は左右調整が難しいので、次に狙う足場を先読みしながらジャンプ方向を決めましょう。</li>
                <li>コンベアはジャンプ中にも速度が乗るため、流れの終端でジャンプすることで遠くの足場へ届きやすくなります。</li>
                <li>天井に当たった直後は無敵時間を活かし、素早く次の足場へ移動すると追い打ちを避けられます。</li>
                <li>スクロールが速くなったら、左右移動よりも落下速度を優先して安全な縦ラインを確保するとゲームオーバーを防ぎやすくなります。</li>
            </ul>
        </section>
    </main>
</body>
</html>
