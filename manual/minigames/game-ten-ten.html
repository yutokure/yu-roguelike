<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ミニゲーム: 1010パズル</title>
    <link rel="stylesheet" href="../manual.css">
</head>
<body>
    <main>
        <h1>ミニゲーム: 1010パズル</h1>
        <section>
            <h2>概要</h2>
            <p>
                10×10 グリッドに 3 つずつ提示されるブロックを置いて、行や列を揃えて消していくパズルです。
                消したライン数に応じて経験値 (XP) が加算され、行と列を同時に消すと倍率ボーナスが発生します。
                ブロックを置けなくなった時点でゲームオーバーです。
            </p>
        </section>
        <section>
            <h2>画面構成</h2>
            <ul>
                <li><strong>盤面キャンバス</strong>：10×10 のグリッドに配置済みブロックとドラッグ中のプレビューを表示します。ライン消去時は該当行・列がフラッシュします。</li>
                <li><strong>HUD</strong>：総消去ライン数や最大同時消去、手番数、現在のコンボと累計 XP を表示します。直前に得た XP も追記されます。</li>
                <li><strong>ブロック棚</strong>：現在利用できる 3 つのピースがキャンバスとして並び、ドラッグ開始の起点になります。補充中はメッセージが表示されます。</li>
                <li><strong>ヒント行</strong>：基本操作とリスタートのショートカット (<kbd>R</kbd>) を常に案内します。</li>
            </ul>
        </section>
        <section>
            <h2>ゲーム開始と補充</h2>
            <ol>
                <li>ミニゲーム選択画面から <strong>1010パズル</strong> を起動すると、即座に初期セットの 3 ピースが生成されます (難易度指定がなければ NORMAL)。</li>
                <li>3 ピースすべてを盤面に配置すると、新しい 3 ピースが補充されます。最大 8 回まで再抽選し、それでも配置できない組み合わせだった場合は小型ピースに入れ替えて手詰まりを避けます。</li>
                <li>それでも置けるピースが作れない場合は盤面をリセットした上でゲームオーバー扱いになります (極めて稀)。</li>
            </ol>
        </section>
        <section>
            <h2>操作方法</h2>
            <ul>
                <li>マウス／タッチで棚のピースをドラッグし、盤面上のマスへドロップします。置ける場所に重ねると淡色プレビューが表示され、置けない位置は赤色で示されます。</li>
                <li>ピースを離すとその位置に確定配置されます。直前のドラッグが成立しなかった場合は元の棚へ戻ります。</li>
                <li><kbd>R</kbd>：いつでも盤面・統計を初期化して再スタートします。ゲームオーバー後も同じキーで即時再挑戦できます。</li>
            </ul>
        </section>
        <section>
            <h2>ルールと XP 計算</h2>
            <ul>
                <li>盤面は常に 10×10 の固定サイズで、用意されているブロックは 1〜9 マス程度の基本形から不規則形まで 29 種類です。</li>
                <li>行または列をすべて埋めると消去され、消去したライン数に応じて XP テーブル <code>{1:2, 2:10, 3:25, 4:50, 5+:150}</code> が適用されます。行と列の同時消去はテーブル値の 2 倍になります。</li>
                <li>ラインを消すたびに累計ライン数と最大同時消去が更新され、盤面上で該当行・列が短時間フラッシュ表示されます。</li>
                <li>連続してライン消去に成功するとコンボが継続し、最大コンボと直前の XP が HUD に記録されます。消去が途切れるとコンボは 0 に戻ります。</li>
                <li>XP を獲得したタイミングでは盤面中心に <code>+XP</code> のポップアップが表示され、ホストへは消去種別と難易度を添えて報告されます。</li>
            </ul>
        </section>
        <section>
            <h2>難易度設定</h2>
            <p>
                難易度は <code>options.difficulty</code> で <code>"EASY"</code> / <code>"NORMAL"</code> / <code>"HARD"</code> を指定できます。
                EASY は小型ブロックの比率が高く、HARD は複雑・不規則な形状が出やすくなります。未指定の場合は NORMAL です。
            </p>
        </section>
        <section>
            <h2>ゲーム終了条件</h2>
            <p>
                現在提示されているいずれのピースも置けなくなるとゲームオーバーになり、盤面に「置ける場所がありません」と表示されます。
                補助処理として、小さいピースへの差し替えや同一ピース 3 個の再配布を試みますが、それでも配置不可の場合に終了します。
            </p>
        </section>
        <section>
            <h2>攻略のヒント</h2>
            <ul>
                <li>行と列の交差地点を同時に消すと XP が倍増するため、盤面中央付近の十字消しを狙って配置すると効率良く稼げます。</li>
                <li>コンボが続くと XP の伸びが把握しやすいので、次に控えるピースの形を確認しながら空きスペースを確保しましょう。</li>
                <li>難しいピースが続いたときは、あえて小さなピースを後回しにして広い領域を整地すると、補充後に手詰まりになりにくくなります。</li>
            </ul>
        </section>
    </main>
</body>
</html>
