<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ミニゲーム: だるまさんがころんだ</title>
    <link rel="stylesheet" href="../manual.css">
</head>
<body>
    <main>
        <h1>ミニゲーム: だるまさんがころんだ</h1>
        <section>
            <h2>概要</h2>
            <p>
                見張りが背を向けている間だけ前進し、振り向かれる前にゴールへ到達する反射系ミニゲームです。
                見張りの状態は安全・警告・監視の 3 段階でサイクルし、警告や監視中に動いていると即失敗になります。
                ゴールまでたどり着ければ <strong>50XP</strong> を獲得できます。
            </p>
        </section>
        <section>
            <h2>準備とゲーム開始</h2>
            <ol>
                <li>タイトルメニューから <strong>だるまさんがころんだ</strong> を選択します。</li>
                <li>ホストの開始操作でラウンドが始まり、見張りの状態表示と進行ゲージがアクティブになります。</li>
                <li>初期状態では見張りが準備中（アイドル）なので、スタート直後に安全フェーズへ移行するまで待機します。</li>
            </ol>
            <p class="small-note">ホストの一時停止でゲームを停止でき、ラウンド終了後は再スタートで初期状態に戻ります。</p>
        </section>
        <section>
            <h2>操作方法</h2>
            <ul>
                <li><kbd>Space</kbd> または <kbd>↑</kbd> を押し続ける: プレイヤーが前進します。</li>
                <li>キーを離す: その場で停止します。</li>
            </ul>
            <p>移動操作は押しっぱなし／素早い離しの両方に対応しています。入力をホールドしたままでも警告・監視に切り替わるタイミングで自動停止はしないため、自分で離す必要があります。</p>
        </section>
        <section>
            <h2>ルールと状態遷移</h2>
            <ul>
                <li><strong>安全 (safe)</strong>: 1.7〜2.9 秒の範囲でランダムに継続し、移動しても問題ありません。進行度は秒間約 22% ずつ伸び、合計 100% でゴールです。</li>
                <li><strong>警告 (warning)</strong>: 安全フェーズの終盤 0.3〜0.9 秒程度が警告時間に割り当てられます。残り 0.12 秒を切った状態で動いていると失敗判定になります。</li>
                <li><strong>監視 (watch)</strong>: 1.05〜1.8 秒の間ランダムに続きます。監視中は一切動いてはいけません。監視が終わると再び安全に戻ります。</li>
            </ul>
            <p>見張りのサイクルは安全 → 警告 → 監視 → 安全…の順で繰り返されます。ゲーム開始時のみ準備中 (idle) を経由します。</p>
        </section>
        <section>
            <h2>UI の見かた</h2>
            <ul>
                <li>上段のカードに見張りの状態名と色付きカウントダウンが表示され、残り時間の目安がわかります。</li>
                <li>同じカード内の「移動中 / 停止中」表示は現在の入力を反映します。動いている間は淡い青で強調されます。</li>
                <li>中央カードのゲージが進行度を示します。下部のテキストで現在の距離（%）と経過時間が確認できます。</li>
                <li>ゴールに成功すると、その時点のタイムがベスト記録として同カードに残ります（ブラウザを閉じるまで有効）。</li>
                <li>下段のステータスカードには現在の状態（開始待ち / 進行中 / クリア / 失敗 など）が表示されます。</li>
            </ul>
        </section>
        <section>
            <h2>成功と失敗条件</h2>
            <p>
                進行ゲージが 100% に達すると即座にクリアとなり、経験値 50XP を受け取ります。警告中の終盤または監視中に少しでも移動するとその場で失敗し、そのラウンドは終了します。再挑戦時にゲームを再スタートすると進行度がリセットされるため、改めて安全フェーズを待ってから前進しましょう。
            </p>
        </section>
        <section>
            <h2>攻略のヒント</h2>
            <ul>
                <li>警告に入ったら残り時間が 0.2 秒を切る前に入力を離すと安全です。カウントダウンの色が黄色から赤へ変わったら即停止を意識しましょう。</li>
                <li>安全フェーズの開始直後に素早く移動を開始すると、1 回のサイクルで大きく距離を稼げます。</li>
                <li>クリアタイムはベスト記録として残るので、短縮を狙う場合は安全フェーズごとに押し始めのタイミングを調整すると効果的です。</li>
            </ul>
        </section>
    </main>
</body>
</html>
