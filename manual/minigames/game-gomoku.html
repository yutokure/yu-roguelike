<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ミニゲーム: 五目並べ</title>
    <link rel="stylesheet" href="../manual.css">
</head>
<body>
    <main>
        <h1>ミニゲーム: 五目並べ</h1>

        <section>
            <h2>概要</h2>
            <p>
                五目並べは、15×15の碁盤でプレイヤーとAIが交互に石を打ち合い、先に5連を作った側が勝利するターン制ボードゲームです。
                盤上には常に現在の脅威がハイライト表示され、AIは難易度に応じて最適な手を選択します。
                プレイヤーは常に先手で開始し、石の配置やリーチ、勝利に応じて経験値（EXP）を獲得できます。
            </p>
        </section>

        <section>
            <h2>基本ルール</h2>
            <ul>
                <li>交互に石を1つずつ配置し、縦・横・斜めいずれかで自分の石を5つ連ねると勝利です。</li>
                <li>全マスが埋まるまで勝敗が決まらなかった場合は引き分けになります。</li>
                <li>禁手ルールはありませんが、ダブル三や四三といった形成は脅威として検出され、警告表示の対象になります。</li>
            </ul>
        </section>

        <section>
            <h2>操作方法</h2>
            <ul>
                <li>マウスカーソルを盤上の空きマスに合わせると、薄い黄色のホバー表示で着手位置の候補が示されます。</li>
                <li>クリックするとそのマスに石が配置され、直後にAIの手番へ移ります。</li>
                <li>最新の手は黄色いリングで強調されるため、直前の着手を見失いにくくなっています。</li>
                <li><kbd>R</kbd> キーを押すとゲームを即座にリセットし、初期状態から再開できます。</li>
            </ul>
        </section>

        <section>
            <h2>難易度とAI</h2>
            <p>
                難易度は <strong>EASY / NORMAL / HARD</strong> の3段階が用意されており、選択した難易度はゲーム開始時のオプションとして渡されます。
                いずれの難易度でも即勝利手や即負け手を優先的に判定し、HARDでは候補手の先読みを行います。
                AIは中心付近を重視しながら連結数や空きマスの形を評価し、プレイヤーのリーチに対して素早く防御を行います。
            </p>
        </section>

        <section>
            <h2>脅威ハイライト</h2>
            <p>
                盤面の解析結果に基づき、重要な形はオレンジ（警告）または赤（危険）で点滅しながら表示されます。
                新たに検出・解消された脅威に応じて、盤面の付近に「防手」「勝ち手」「詰み手」などのポップアップが表示され、形勢判断をサポートします。
            </p>
            <table>
                <thead>
                    <tr>
                        <th>種類</th>
                        <th>条件</th>
                        <th>区分</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>オープン三</td>
                        <td>両端が空いた3連</td>
                        <td>警告（オレンジ）</td>
                    </tr>
                    <tr>
                        <td>閉じ四</td>
                        <td>片側が塞がった4連</td>
                        <td>警告（オレンジ）</td>
                    </tr>
                    <tr>
                        <td>オープン四</td>
                        <td>両端が空いた4連</td>
                        <td>危険（赤）</td>
                    </tr>
                    <tr>
                        <td>ダブル三</td>
                        <td>着手によってオープン三が同時に2つ以上発生</td>
                        <td>危険（赤）</td>
                    </tr>
                    <tr>
                        <td>四三</td>
                        <td>着手でオープン四とオープン三が同時成立</td>
                        <td>危険（赤）</td>
                    </tr>
                </tbody>
            </table>
            <p>
                これらの判定はプレイヤー・AI双方に適用されます。危険な形が発生すると強調表示とともにアニメーションが再生され、次の一手を検討する指標になります。
            </p>
        </section>

        <section>
            <h2>EXP獲得</h2>
            <ul>
                <li>石を配置するたびに1EXPを獲得します。</li>
                <li>自分の手で勝利直前のオープン四（リーチ）を作ると追加で10EXPが与えられます。</li>
                <li>勝利時には難易度ごとのボーナスが支給されます（EASY: 28、NORMAL: 110、HARD: 260）。</li>
            </ul>
        </section>

        <section>
            <h2>戦略メモ</h2>
            <ul>
                <li>中央からの展開はAIも好むため、序盤は早めに有利な勢力圏を確保すると戦いやすくなります。</li>
                <li>警告表示が出た箇所は即座に対応し、特に赤い危険表示は放置すると次手で負けに直結します。</li>
                <li>ダブル三や四三を自分で作ると攻めの起点になりますが、AIも同じ形を追求してくるため、相手の脅威を消す防手を欠かさないようにしましょう。</li>
            </ul>
        </section>
    </main>
</body>
</html>
