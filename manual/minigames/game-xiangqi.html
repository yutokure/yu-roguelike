<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ミニゲーム: シャンチー</title>
    <link rel="stylesheet" href="../manual.css">
</head>
<body>
    <main>
        <h1>ミニゲーム: シャンチー</h1>
        <section>
            <h2>概要</h2>
            <p>
                中国の将棋として知られる <strong>シャンチー（象棋）</strong> を本作の UI に合わせて遊べるホットシート対戦モードです。
                9×10 マスの盤に赤軍（下側）と黒軍（上側）が配置され、プレイヤーが交互に駒を動かして相手の <q>将（帥）</q> を詰ませることを目指します。
                駒の移動候補や王手中のマスは自動でハイライトされるため、シャンチーを初めて触れる人でも直感的にルールを把握できます。
            </p>
            <p>
                情報パネルには手番・メッセージ・累計スコアがまとめて表示され、駒取りや王手、詰み・持将軍（ステイルメイト）時には MiniExp の経験値（EXP）が付与されます。
                リセットボタンでいつでも初期配置に戻せるので、定跡研究や終盤の読み合わせにも最適です。
            </p>
        </section>
        <section>
            <h2>起動と難易度</h2>
            <ul>
                <li>ミニゲームセレクションの「ボード」カテゴリから <strong>シャンチー</strong> を選ぶと、赤軍が先手の対局が開始されます。</li>
                <li>本バージョンはローカル 2 人対戦専用です。プレイヤーどうしで交互にクリックしながら進めてください。</li>
                <li>MiniExp API から呼び出す場合は <code>options.difficulty</code> に <code>"EASY"</code>／<code>"NORMAL"</code>／<code>"HARD"</code> を指定すると、勝利時の EXP ボーナス量を調整できます（デフォルトは NORMAL）。</li>
            </ul>
        </section>
        <section>
            <h2>画面構成</h2>
            <ul>
                <li><strong>情報パネル</strong>：タイトルと <q>赤（下）／黒（上）</q> の手番表示、直近の出来事（駒取り・王手・詰みなど）、合計スコアを表示します。</li>
                <li><strong>シャンチー盤</strong>：9 列×10 行の格子盤。中央には <q>楚河　漢界</q> の河川ラベルが描かれ、選択中の駒・移動可能マス・取れるマス・王手を受けているマスが色分けされます。</li>
                <li><strong>操作ボタン</strong>：<q>初期配置に戻す</q> を押すと現在の対局をリセットして最初からやり直せます。</li>
            </ul>
        </section>
        <section>
            <h2>操作方法</h2>
            <ul>
                <li>手番側の駒をクリックすると選択状態になり、合法手が緑（移動）または赤（駒取り）でハイライトされます。</li>
                <li>ハイライトされたマスをクリックすると駒が移動します。直前に動かした駒はわずかに拡大表示され、動いた場所が確認しやすくなります。</li>
                <li>相手の駒を取ると自動でスコア／EXP が加算され、メッセージ欄に戦況が表示されます。</li>
                <li>王手になるとチェック中の将（帥）のマスが強調表示されます。合法手が無くなると詰みまたは持将軍として対局が終了します。</li>
                <li><strong>初期配置に戻す</strong> ボタンでいつでも盤面とスコアを初期状態に戻せます。</li>
            </ul>
        </section>
        <section>
            <h2>シャンチーの基本ルール</h2>
            <p>
                目的は相手の <strong>将（黒側）／帥（赤側）</strong> を王手詰み（逃げ道のない王手）にすることです。各ターンで 1 手だけ指し、常に自軍の将・帥が王手を受けた状態を解消しなければなりません。
                将と帥が同じ列で向かい合う形を <q>王見合い</q> と呼び、間に駒がなければ違法手として自動的に弾かれます。
            </p>
            <h3>盤面の特徴</h3>
            <ul>
                <li>中央の河（楚河・漢界）が陣地を隔てており、一部の駒は河を越えられません。</li>
                <li>赤・黒それぞれの陣の中央 3×3 マスは <strong>九宮（宮殿）</strong> と呼ばれ、将／帥と仕（士）が行動できる範囲がこの中に制限されています。</li>
            </ul>
            <h3>駒の種類と動き</h3>
            <ul>
                <li><strong>将／帥（General）</strong>：宮殿内で上下左右 1 マス移動。王見合いになる列へは進めません。</li>
                <li><strong>士（Advisor）</strong>：宮殿内を斜め 1 マスずつ移動します。</li>
                <li><strong>象（Elephant）</strong>：斜め 2 マスに移動します。途中の <q>象眼</q> に駒があると進めず、河を越えることもできません。</li>
                <li><strong>馬（Horse）</strong>：チェスのナイトに似た L 字移動（横 1・縦 2 または縦 1・横 2）ですが、進行方向の <q>馬脚</q> に駒があると跳べません。</li>
                <li><strong>車（Chariot）</strong>：縦横に何マスでも移動でき、途中に駒があると遮られます。</li>
                <li><strong>砲（Cannon）</strong>：車と同じく縦横に走れますが、駒取りは間に 1 枚だけ挟んだ状態で飛び越える必要があります。</li>
                <li><strong>兵／卒（Soldier）</strong>：自陣では前方へ 1 マスずつ進み、河を渡ると左右へも 1 マス移動できます。後退はできません。</li>
            </ul>
        </section>
        <section>
            <h2>ターンの流れと終局</h2>
            <ol>
                <li>手番のプレイヤーが自軍の駒を 1 つ選び、提示された合法手の中から移動先を決定します。</li>
                <li>相手駒のいるマスに入った場合はその駒を捕獲します。捕獲後は即座に手番が交代します。</li>
                <li>相手の将／帥に王手がかかると自動的に EXP が入り、メッセージ欄に警告が表示されます。</li>
                <li>相手が合法手を指せなくなった時点で詰み（勝利）または持将軍（引き分け）が宣言され、対局は停止します。</li>
            </ol>
            <p class="small-note">引き分け後もリセットすればすぐに次の対局を始められます。</p>
        </section>
        <section>
            <h2>スコアと EXP</h2>
            <p>赤軍が行ったアクションに応じてスコアと EXP が加算されます。スコアは内部ランキング用の数値で、EXP は MiniExp 全体の経験値です。</p>
            <table>
                <thead>
                    <tr><th>アクション</th><th>スコア</th><th>EXP</th></tr>
                </thead>
                <tbody>
                    <tr><td>兵／卒を捕獲</td><td>+1</td><td>+40</td></tr>
                    <tr><td>仕／士・象を捕獲</td><td>+2</td><td>+55</td></tr>
                    <tr><td>馬を捕獲</td><td>+4</td><td>+85</td></tr>
                    <tr><td>砲を捕獲</td><td>+6</td><td>+110</td></tr>
                    <tr><td>車を捕獲</td><td>+9</td><td>+130</td></tr>
                    <tr><td>王手をかける</td><td>—</td><td>+35</td></tr>
                    <tr><td>詰ませて勝利</td><td>—</td><td>+260 / +420 / +640 <span class="small-note">（EASY / NORMAL / HARD）</span></td></tr>
                    <tr><td>持将軍（ステイルメイト）にする</td><td>—</td><td>+80</td></tr>
                </tbody>
            </table>
            <p class="small-note">将／帥を直接捕獲した場合は勝利扱いとなり、勝利ボーナス EXP が付与されます。</p>
        </section>
        <section>
            <h2>プレイのヒント</h2>
            <ul>
                <li>序盤は兵を前進させつつ、車・馬・砲を活用して中央の制圧を狙いましょう。砲は味方駒を踏み台にして遠距離から王手を狙えるのが強みです。</li>
                <li>馬は <q>馬脚</q> を塞がれると動けません。自軍の兵で足場を妨げてしまわないよう注意しましょう。</li>
                <li>将／帥と士は宮殿から出られないため、終盤は車や砲で逃げ道を封じる <q>包囲</q> を意識すると詰みを狙いやすくなります。</li>
                <li>河を渡った兵は横に動けるため、相手の視界の外から侵入させてプレッシャーをかけると効果的です。</li>
            </ul>
        </section>
    </main>
</body>
</html>
