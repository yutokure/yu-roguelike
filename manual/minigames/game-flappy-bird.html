<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ミニゲーム: フラッピーバード風</title>
    <link rel="stylesheet" href="../manual.css">
</head>
<body>
    <main>
        <h1>ミニゲーム: フラッピーバード風</h1>
        <section>
            <h2>概要</h2>
            <p>
                360×480 ピクセルのキャンバス上で鳥を操作し、横方向に流れてくるパイプの間をくぐり抜けるアクションミニゲームです。
                1 本のパイプを通過するたびにスコアと経験値を獲得し、連続成功でコンボレベルが上がるほどボーナスが増加します。
                操作はワンタップのみでシンプルですが、重力と落下速度の管理が要求され、難易度によってスクロール速度やパイプ間隔が変化します。
            </p>
        </section>
        <section>
            <h2>準備とゲーム開始</h2>
            <ol>
                <li>MiniExp ランチャーから <strong>フラッピーバード風</strong> を選択し、必要に応じて難易度（EASY / NORMAL / HARD）を設定します。未指定の場合は NORMAL になります。</li>
                <li>ゲーム画面が表示されると、中央付近に「スペース / クリックで開始」と案内が表示されます。<kbd>スペース</kbd>キーやマウスクリック／タップで飛行を開始します。</li>
                <li>ゲームオーバー後は画面上にリスタート案内が表示され、<kbd>スペース</kbd>または<kbd>R</kbd>キーの入力ですぐに再挑戦できます。</li>
            </ol>
        </section>
        <section>
            <h2>操作方法</h2>
            <ul>
                <li><kbd>スペース</kbd> / マウスクリック / タップ：鳥が上向きに羽ばたきます。ゲーム開始やゲームオーバー後の再開も同じ操作で行います。</li>
                <li><kbd>R</kbd>（ゲームオーバー時）：スコアとパイプ配置をリセットしてリスタートします。終了後すぐに連続挑戦したいときに便利です。</li>
            </ul>
            <p>ゲーム起動中はキー入力と画面のポインター操作が常に受け付けられるため、マウス／タッチデバイスでも直感的にプレイできます。</p>
        </section>
        <section>
            <h2>ルールとスコアリング</h2>
            <ul>
                <li>鳥は自然落下していき、羽ばたくたびに上昇速度が <code>flap</code> の値（難易度によって 260〜300）だけ上向きに設定されます。</li>
                <li>重力は常に加算され、落下速度は <code>maxFall</code>（420〜470）で制限されています。地面に接触すると即座にゲームオーバーです。</li>
                <li>パイプの左右幅は共通で 60 ピクセル、上下のパイプの間にある隙間が「ギャップ」です。パイプの間を通過するとスコアが 1 上昇し、コンボレベルが最大 9 まで 1 ずつ上がります。</li>
                <li>パイプと接触した場合や地面に落下した場合、ゲームが停止し、これまでのスコアに応じた清算経験値 <code>max(2, round(score × 0.6))</code> が付与されます。</li>
            </ul>
            <p>ゲーム中は画面上部に現在のスコアとコンボ表示が描画され、コンボレベルが上がるほど画面右上に表示される獲得 EXP ポップアップのレベルも上昇します。</p>
        </section>
        <section>
            <h2>経験値の仕組み</h2>
            <p>パイプ通過時の獲得経験値は難易度ごとに決まった基礎値に、コンボが 2 以上のときはボーナスが加算されます。</p>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>難易度</th>
                            <th>パイプ通過基礎 EXP</th>
                            <th>コンボボーナス</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>EASY</td>
                            <td>6</td>
                            <td><code>(コンボ - 1) × 1.5</code></td>
                        </tr>
                        <tr>
                            <td>NORMAL</td>
                            <td>8</td>
                            <td><code>(コンボ - 1) × 2.0</code></td>
                        </tr>
                        <tr>
                            <td>HARD</td>
                            <td>11</td>
                            <td><code>(コンボ - 1) × 2.5</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p>ボーナスはコンボが増えるほど大きくなるため、連続してパイプを抜けることが高効率な経験値稼ぎにつながります。</p>
        </section>
        <section>
            <h2>難易度ごとの違い</h2>
            <p>難易度は鳥の操作感と障害物の密度をまとめて切り替えます。主な差分は以下の通りです。</p>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>難易度</th>
                            <th>重力 / 羽ばたき強度</th>
                            <th>スクロール速度</th>
                            <th>ギャップ幅</th>
                            <th>パイプ出現間隔</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>EASY</td>
                            <td>750 / 260</td>
                            <td>120</td>
                            <td>150</td>
                            <td>約 1600 ms</td>
                        </tr>
                        <tr>
                            <td>NORMAL</td>
                            <td>820 / 280</td>
                            <td>150</td>
                            <td>135</td>
                            <td>約 1450 ms</td>
                        </tr>
                        <tr>
                            <td>HARD</td>
                            <td>900 / 300</td>
                            <td>180</td>
                            <td>120</td>
                            <td>約 1250 ms</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p>難易度が上がるほど鳥の落下が速くなり、パイプの間隔も狭く短くなるため精密なタイミング調整が必要です。</p>
        </section>
        <section>
            <h2>攻略のヒント</h2>
            <ul>
                <li>羽ばたき直後に落下速度が徐々に増していくため、連続して押しすぎると天井にぶつかりやすくなります。羽ばたきは短い間隔で刻むように調整しましょう。</li>
                <li>パイプは常に 3 本分先まで用意されており、スクロール速度は一定なので、次のギャップ位置を見ながら早めに高度を合わせると安定します。</li>
                <li>コンボは最大 9 まで維持でき、失敗するまでは減少しません。焦らずリズムを保つことで高いボーナスを継続できます。</li>
            </ul>
        </section>
    </main>
</body>
</html>
