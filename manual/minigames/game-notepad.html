<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ミニゲーム: メモ帳ユーティリティ</title>
    <link rel="stylesheet" href="../manual.css">
</head>
<body>
    <main>
        <h1>ミニゲーム: メモ帳ユーティリティ</h1>
        <section>
            <h2>概要</h2>
            <p>
                MiniExp MOD に同梱されている Windows 11 風のシングルペインテキストエディターです。
                ファイルの新規作成や読み込み、Markdown 風の装飾、ズームや折り返しの調整など
                軽いメモ取りから簡易ドキュメント作成までを想定した機能を備えています。
                開く・編集・保存の各操作で経験値 (XP) が付与されるため、
                他のミニゲームをプレイしながら作業ログを残したい場合にも便利です。
            </p>
        </section>
        <section>
            <h2>起動と画面構成</h2>
            <ol>
                <li>ミニゲーム一覧から <strong>メモ帳</strong> を選択すると即座にエディター画面が開きます。</li>
                <li>タイトルバーには現在のファイル名とダミーのタブ/ウィンドウボタンが表示されます。
                    未保存の変更があるとファイル名の前に <code>*</code> が付きます。</li>
                <li>タイトルバー下には <strong>メニューバー</strong> (ファイル/編集/表示) と
                    よく使う操作をまとめた <strong>コマンドバー</strong> が並びます。</li>
                <li>中央はテキストエリアです。既定では折り返し有効・フォントサイズ 15px 相当で表示されます。</li>
                <li>ステータスバーを有効にしている場合、画面下部にカーソル位置や文字数、
                    ズーム倍率、改行コード、エンコーディング (UTF-8 固定) が表示されます。</li>
            </ol>
            <p class="small-note">タブ切り替えやウィンドウ操作は視覚的な演出のみで、実際の挙動はありません。</p>
        </section>
        <section>
            <h2>ファイル操作</h2>
            <ul>
                <li><strong>新規</strong>: 変更が残っている場合は確認ダイアログを経て空白文書にリセットします。
                    既定のファイル名はローカライズ済みの「タイトルなし.txt」です。</li>
                <li><strong>開く…</strong>: <code>.txt</code> / <code>.md</code> / <code>.json</code> / <code>.log</code> / <code>.csv</code> 等の
                    プレーンテキストを読み込めます。ドラッグ&amp;ドロップには対応していません。</li>
                <li><strong>上書き保存 / 名前を付けて保存…</strong>:
                    既定名のまま保存する場合はダイアログでファイル名の入力が求められます。
                    保存するとブラウザーのダウンロードとして出力され、XP +5 を獲得します。</li>
                <li><strong>印刷…</strong>: 別タブを開いて印刷用ページを生成します。ポップアップブロックに注意してください。</li>
                <li>閉じるボタンを押した際も未保存の変更がある場合は破棄確認が表示されます。</li>
            </ul>
            <p class="small-note">ファイルの読み書きは常に UTF-8 で行われます。BOM 付き/無しの判別や別エンコーディング変換はありません。</p>
        </section>
        <section>
            <h2>編集機能</h2>
            <ul>
                <li><strong>元に戻す / やり直し</strong> など標準的なクリップボード操作をメニューから実行できます。</li>
                <li>コマンドバーでは次の Markdown/HTML 風操作をトグル式で適用できます。
                    <ul>
                        <li><strong>H1</strong>: 選択行の先頭に <code># </code> を付与/除去します。</li>
                        <li><strong>•</strong>: 箇条書きとして <code>- </code> を付与/除去します。</li>
                        <li><strong>B</strong>: 選択範囲を <code>**太字**</code> で囲みます。</li>
                        <li><strong>I</strong>: 選択範囲を <code>*斜体*</code> で囲みます。</li>
                        <li><strong>U</strong>: 選択範囲を <code>&lt;u&gt;下線&lt;/u&gt;</code> で囲みます。</li>
                    </ul>
                </li>
                <li><strong>検索…</strong> は現在位置から末尾まで検索し、未ヒットの場合は文頭に巻き戻して再検索します。</li>
                <li><strong>置換…</strong> は選択範囲が完全一致している場合に置換するか、次の一致箇所まで移動します。</li>
                <li>設定パネルの「日時を挿入」ボタンでロケールに応じたパターン
                    (<code>{year}-{month}-{day} {hour}:{minute}:{second}</code> など) をカーソル位置に挿入できます。</li>
            </ul>
        </section>
        <section>
            <h2>表示と設定</h2>
            <p>コマンドバー右端の歯車ボタン、または「表示」メニューから次の設定を切り替えられます。</p>
            <ul>
                <li><strong>折り返し</strong>: テキストエリアの <code>pre-wrap</code> と <code>pre</code> を切り替えます。</li>
                <li><strong>ステータスバー</strong>: カーソル位置や文字数を表示するバーの表示/非表示を切り替えます。</li>
                <li><strong>ズーム</strong>: 50%〜200% まで 10% 刻みで調整でき、既定値 100% に戻すボタンもあります。</li>
                <li><strong>ズーム表示</strong>: ステータスバーの右端には現在のズーム、改行コード (CRLF/LF)、エンコーディングが表示されます。</li>
            </ul>
            <p class="small-note">設定やウィンドウ状態は 0.4 秒程度の間隔でローカルストレージに自動保存され、次回起動時に復元されます。</p>
        </section>
        <section>
            <h2>キーボードショートカット</h2>
            <ul>
                <li><kbd>Ctrl</kbd>+<kbd>N</kbd>: 新規作成</li>
                <li><kbd>Ctrl</kbd>+<kbd>O</kbd>: ファイルを開く</li>
                <li><kbd>Ctrl</kbd>+<kbd>S</kbd>: 上書き保存 (Shift 併用で「名前を付けて保存」)</li>
                <li><kbd>Ctrl</kbd>+<kbd>P</kbd>: 印刷</li>
                <li><kbd>Ctrl</kbd>+<kbd>F</kbd>: 検索、<kbd>Ctrl</kbd>+<kbd>H</kbd>: 置換</li>
                <li><kbd>Ctrl</kbd>+<kbd>0</kbd>: ズームを既定値に戻す</li>
                <li><kbd>Ctrl</kbd>+<kbd>+</kbd> / <kbd>Ctrl</kbd>+<kbd>-</kbd>: ズームイン/ズームアウト</li>
            </ul>
            <p>ゲーム開始時に MiniExp 本体側の <kbd>P</kbd> ショートカット (一時停止) は無効化され、エディター終了時に自動で復旧します。</p>
        </section>
        <section>
            <h2>経験値とセッション管理</h2>
            <ul>
                <li>エディターを開いた時点で <strong>+5 XP</strong> を獲得します。</li>
                <li>テキストを編集すると <strong>0.75 秒ごと</strong> を上限に <strong>+1 XP</strong> を得られます。</li>
                <li>保存操作完了時には追加で <strong>+5 XP</strong> が付与されます。</li>
                <li>現在のセッションで獲得した XP はミニゲーム終了時にスコアとして MiniExp に返却されます。</li>
            </ul>
        </section>
        <section>
            <h2>よくある質問と注意点</h2>
            <ul>
                <li>開いたファイルの改行コードは自動判別され、入力中に検出された形式がステータスバーに反映されます。</li>
                <li>複数ファイルの同時編集には対応していません。別ファイルを開く場合は必ず保存してから切り替えてください。</li>
                <li>印刷ウィンドウが開かない場合は、ブラウザーのポップアップブロック設定を確認してください。</li>
                <li>ローカルストレージの内容が破損している場合は自動復旧できないため、ブラウザーのサイトデータを削除して再起動してください。</li>
            </ul>
        </section>
    </main>
</body>
</html>
