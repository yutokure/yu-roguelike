<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ミニゲーム: チェス</title>
    <link rel="stylesheet" href="../manual.css">
</head>
<body>
    <main>
        <h1>ミニゲーム: チェス</h1>
        <section>
            <h2>概要</h2>
            <p>
                8×8 の盤上で白番（プレイヤー）と黒番（AI）が戦う本格チェスです。
                クリック操作だけで駒の選択と移動ができ、合法手だけがハイライトで示されます。
                駒取りやチェック、昇格、勝利時に経験値（EXP）が付与されるので、コンボを狙いながら AI を詰ませましょう。
            </p>
            <p>
                盤面には直前の手やチェック状態が色分け表示され、情報パネルには現在の手番・スコア・難易度タグ・メッセージがまとめて表示されます。
                リスタートボタンでいつでも初期配置に戻せるため、短時間の研究や詰め筋確認にも使えます。
            </p>
        </section>
        <section>
            <h2>起動と難易度</h2>
            <ul>
                <li>ミニゲームセレクションの「ボード」カテゴリから <strong>チェス</strong> を選ぶと即座に対局が始まります（プレイヤーが先手）。</li>
                <li>
                    難易度は <strong>EASY</strong>／<strong>NORMAL</strong>／<strong>HARD</strong> の 3 段階で、デフォルトは NORMAL です。
                    難易度が上がるほど AI の読みの深さが増し、思考時間も短くなります（EASY: 1 手読み、NORMAL: 2 手読み、HARD: 3 手読み）。
                </li>
                <li>ウィンドウ上部の見出しに難易度タグが表示されるので、現在どの設定で遊んでいるかを常に確認できます。</li>
            </ul>
            <p class="small-note">API から呼び出す場合は <code>options.difficulty</code> に <code>"easy"</code>／<code>"normal"</code>／<code>"hard"</code> を指定すると反映されます。</p>
        </section>
        <section>
            <h2>画面構成</h2>
            <ul>
                <li><strong>情報パネル</strong>：手番表示（停止中／あなたの番／AI 思考中）、スコア、状況メッセージ、リスタートボタンがまとまっています。</li>
                <li><strong>チェス盤</strong>：木目調の 8×8 盤。選択中の駒、移動可能マス、取れるマス、チェックを受けている王、直前の手がそれぞれ異なる色で表示されます。</li>
                <li><strong>メッセージ欄</strong>：チェックやステイルメイト、勝敗といった重要な出来事をテキストで通知します。</li>
            </ul>
        </section>
        <section>
            <h2>操作方法</h2>
            <ul>
                <li>白い駒をクリックすると選択状態になり、合法手が円形のオーバーレイで示されます。</li>
                <li>目的のマスをクリックして移動します。赤色のハイライトは駒取りが可能なマスです。</li>
                <li>
                    ポーンが敵陣最終段に到達した場合はプロンプトが表示され、<kbd>Q</kbd>/<kbd>R</kbd>/<kbd>B</kbd>/<kbd>N</kbd> のいずれかを入力して昇格先を指定します（未入力の場合はクイーンに昇格）。
                </li>
                <li>AI の手番中は盤面をクリックしても操作は行われません。メッセージ欄に「AI の思考中…」と表示されるのを確認しましょう。</li>
                <li>情報パネルの <strong>リスタート</strong> ボタンで対局をリセットできます。途中でやり直したいときや勝敗がついた後に便利です。</li>
            </ul>
        </section>
        <section>
            <h2>チェスの基本ルール</h2>
            <p>チェスは「相手のキングをチェックメイト（逃げ場のない王手）する」ことを目指すターン制ボードゲームです。各プレイヤーは自分の番に一手だけ指し、必ずチェック状態を解消する手を選ばなければなりません。</p>
            <h3>駒の種類と動き</h3>
            <ul>
                <li><strong>キング</strong>：上下左右斜めに 1 マス移動できます。チェックを受けるマスへは移動できません。</li>
                <li><strong>クイーン</strong>：縦・横・斜めに何マスでも進める最強の駒。途中に味方の駒があると進めません。</li>
                <li><strong>ルーク</strong>：縦横に何マスでも移動します。クイーンやキングのサポート役として終盤まで活躍します。</li>
                <li><strong>ビショップ</strong>：斜め方向に何マスでも動けます。同色マス専用の駒なので 2 枚を活かすことが大切です。</li>
                <li><strong>ナイト</strong>：<q>前後左右に 2 マス＋直角に 1 マス</q> の L 字ジャンプで移動し、他の駒を飛び越えられます。</li>
                <li><strong>ポーン</strong>：基本は前方に 1 マス進み、初動のみ 2 マス前進できます。斜め前の敵駒を取る形でのみキャプチャできます。</li>
            </ul>
            <h3>特殊なルール</h3>
            <ul>
                <li><strong>キャスリング</strong>：キングとルークが未移動で、間のマスが空いている場合に同時移動する防御的な手です。キング側（ショート）とクイーン側（ロング）の 2 種類があります。</li>
                <li><strong>アンパッサン</strong>：相手ポーンが初手で 2 マス前進して隣に並んだ直後、斜め後ろへ取るように捕獲できます。1 手以内に行わないと失効します。</li>
                <li><strong>プロモーション</strong>：ポーンが敵陣最終段に到達するとクイーンやルークなど好きな駒に昇格できます。</li>
                <li><strong>チェック／チェックメイト</strong>：キングが攻撃されている状態がチェックです。逃げる・遮る・取るのいずれかで解消できないとチェックメイトとなり対局終了です。</li>
                <li><strong>ステイルメイト</strong>：合法手がなくチェックもかかっていない場合は引き分けになります。</li>
            </ul>
            <h3>ターンの流れ</h3>
            <ol>
                <li>自駒を 1 つ選択し、合法手の中から移動先を決めます。</li>
                <li>相手の駒がいるマスに進むとその駒を取れます。</li>
                <li>手を指した結果、自分のキングがチェック状態になっていないことを確認します（本作では違法手は自動で弾かれます）。</li>
                <li>ターンが相手に移り、チェックや詰みの判定が行われます。</li>
            </ol>
        </section>
        <section>
            <h2>EXP とスコア</h2>
            <p>白番が行ったアクションに応じて以下の報酬が得られます（EXP は MiniExp 共通の経験値、スコアは画面表示の内部ポイントです）。</p>
            <ul>
                <li>敵駒の捕獲：駒種に応じて <strong>25（ポーン）〜160（クイーン）EXP</strong>。スコアも駒の価値に応じて 10〜90 点加算。</li>
                <li>チェック（王手）：<strong>+25 EXP</strong>。</li>
                <li>ポーン昇格：<strong>+120 EXP</strong> とスコア +90 点。</li>
                <li>チェックメイト勝利：難易度ごとに <strong>EASY 260／NORMAL 420／HARD 650 EXP</strong> のボーナス。</li>
                <li>引き分け（ステイルメイトや持将棋相当など）：<strong>+60 EXP</strong>。</li>
            </ul>
        </section>
        <section>
            <h2>勝敗と引き分け判定</h2>
            <ul>
                <li>黒王をチェックメイトすると勝利です。勝敗が決まると対局は停止し、メッセージ欄で結果が告知されます。</li>
                <li>自玉が詰まされると敗北となり、EXP ボーナスは入りません。</li>
                <li>合法手がなくチェックもかかっていない場合はステイルメイト扱いで引き分けになります。</li>
                <li>50 手ルール（100 手カウント）、総手数 200 到達、あるいは互いにメイトが不可能な駒構成になった場合も自動的に引き分けが宣言されます。</li>
                <li>勝敗・引き分け後は <strong>リスタート</strong> で再戦するか、ミニゲーム一覧に戻って別タイトルを選びましょう。</li>
            </ul>
        </section>
        <section>
            <h2>表示サポートとヒント</h2>
            <ul>
                <li>直前に動いた駒の出発・到着マスは淡い青で、チェックされている王は赤で示されるため、局面の変化を追いやすくなっています。</li>
                <li>選択中の駒が動けるマスだけがハイライトされるので、初心者でも反則手を気にせず指せます。</li>
                <li>AI は黒番固定で戦うため、オープニングの研究や詰めろの確認など、白番視点での練習に最適です。</li>
                <li>HARD では 3 手先まで読むため、駒損を避ける堅実な運びが重要です。EASY で手筋を試し、慣れてきたら段階的に難易度を上げると良いでしょう。</li>
            </ul>
        </section>
        <section>
            <h2>初心者向け戦略ガイド</h2>
            <h3>序盤（オープニング）のコツ</h3>
            <ul>
                <li>最初の数手で中央 4 マス（d4、e4、d5、e5）を意識してポーンと駒を展開しましょう。中央を制すると駒の自由度が高まります。</li>
                <li>ナイトとビショップは早めに盤面へ出し、キングをキャスリングで安全地帯に移動させます。</li>
                <li>同じ駒を何度も動かすより、複数の駒をバランスよく動かして備えるのが基本です。</li>
            </ul>
            <h3>中盤の考え方</h3>
            <ul>
                <li>相手のキングを直接攻める前に、駒の連携で相互に守り合う形を作ると失点を防げます。</li>
                <li>交換の前に「取った駒と取られた駒の価値」を比較し、有利なトレードのみを選ぶ癖をつけましょう。</li>
                <li>ピン（後ろにキングや高価値駒が控えている状態）やフォーク（1 手で複数の駒を攻撃）などの基本テクニックを狙うと攻めがスムーズになります。</li>
            </ul>
            <h3>終盤のポイント</h3>
            <ul>
                <li>キングを積極的に中央へ出し、自分の駒と協力してポーンを昇格させることを意識します。</li>
                <li>少ない駒でメイトを狙うときは、相手の逃げ道を順番に塞いでいく「ボックス化」を意識すると成功しやすくなります。</li>
                <li>ポーンレースになったら、昇格までの手数と相手のチェック手段を計算して、最短でプロモーションできるルートを選択しましょう。</li>
            </ul>
            <p class="small-note">これらのセオリーは実際のチェスでも通用します。EASY で練習したあとに段階的に難易度を上げると理解が深まります。</p>
        </section>
    </main>
</body>
</html>
